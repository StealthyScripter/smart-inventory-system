<% content_for :page_title, "Sign Up" %>

<div class="table-container" style="max-width: 600px; margin: 2rem auto;">
  <div class="table-header">
    <h3 class="table-title">Create Account</h3>
  </div>

  <div style="padding: 2rem;">
    <%= form_with model: @user, url: signup_path, local: true do |form| %>
      <% if @user.errors.any? %>
        <div class="alert alert-danger">
          <strong><%= pluralize(@user.errors.count, "error") %> prohibited this account from being created:</strong>
          <ul style="margin-top: 0.5rem;">
            <% @user.errors.full_messages.each do |message| %>
              <li><%= message %></li>
            <% end %>
          </ul>
        </div>
      <% end %>

      <div class="form-group">
        <%= form.label :email, class: "form-label" %>
        <%= form.email_field :email, class: "form-input", required: true, autofocus: true %>
      </div>

      <div class="grid-2" style="gap: 1rem;">
        <div class="form-group">
          <%= form.label :first_name, class: "form-label" %>
          <%= form.text_field :first_name, class: "form-input", required: true %>
        </div>

        <div class="form-group">
          <%= form.label :last_name, class: "form-label" %>
          <%= form.text_field :last_name, class: "form-input", required: true %>
        </div>
      </div>

      <!-- Hidden field for role - will default to 'guest' -->
      <%= form.hidden_field :role, value: 'guest' %>

      <div class="alert alert-warning" style="margin: 1rem 0;">
        <strong>ℹ️ Note:</strong> New accounts start as <strong>Guest</strong> users with view-only access.
        A manager can upgrade your role after account creation.
      </div>

      <div class="form-group">
        <%= form.label :password, class: "form-label" %>
        <%= form.password_field :password, class: "form-input", required: true %>
        <small style="color: #718096;">Minimum 6 characters</small>
      </div>

      <div class="form-group">
        <%= form.label :password_confirmation, "Confirm Password", class: "form-label" %>
        <%= form.password_field :password_confirmation, class: "form-input", required: true %>
      </div>

      <div style="margin-top: 2rem;">
        <%= form.submit "Create Account", class: "btn btn-primary", style: "width: 100%;" %>
      </div>

      <div style="margin-top: 1rem; text-align: center;">
        <p style="color: #718096;">Already have an account? <%= link_to "Log in", login_path %></p>
      </div>
    <% end %>
  </div>
</div>
